# はじめに

良いコード/悪いコードで学ぶ設計入門（ミノ駆動本）を読み、悪いコードがどれほど悪影響をおよぼすのか、良いコードでどれだけ改善できるのかを実証していくために実際にゲーム作ってみました。
今回は悪いコードをピックアップして実装に取り入れ、クソゲーになってしまう原因を紹介していきます。


### 読むべき人

- ミノ駆動本を読んだけどいまいちピンとこなかった人
- 悪いコードのヤバさが分からない、良いコードのメリットが実感できない
- 部分的なコードでは現実感が湧かなかった人

### 前提

本記事は JAVA のコードで例を提示していますが、考え方に関する内容なので JAVA を書いたことがなくても問題ありません。

### 身に付くスキル

- 保守や変更がしやすいコードを書くための考え方(クラス設計について)

# 参考資料

[仙塲 大也. 良いコード／悪いコードで学ぶ設計入門保守しやすい　成長し続けるコードの書き方](https://www.amazon.co.jp/dp/B09Y1MWK9N/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)

# 内容
今回作成したゲームの実際のコードになります。
https://github.com/kdr250/good-code-bad-code-sample

こちらのコードでクソゲーになってしまっている原因を現場でありそうなシチュエーションで解説していきます。

<br>

### 仕様変更で新技追加！
PM ) ◯◯くん、このゲームで新しく新しい技を追加することになった。実装お願いできるかい？

◯◯ ）承知しました！追加しておきます！

.....

◯◯ ）よし、魔法系の技だから[MagicManagerクラス](https://github.com/kdr250/good-code-bad-code-sample/blob/main/app/src/main/java/com/example/sample/MagicManager.java)見ておけばいいか。追加完了。実行!!

.....

◯◯ ）ん？ダメージゼロ..なぜだ...

![地獄の業火.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2708735/80460d4a-b5a5-c721-efb7-8344b65b42e3.gif)

<br>

ミノ駆動本の中に`6.2.5条件分岐を１箇所にまとめる`という章があります。
その中に以下文章が書かれています。
>ソフトウェアシステムが選択肢を提供しなければならないとき、そのシステムの中の1つのモジュールだけがその選択肢のすべてを把握すべきである。

<br>
この内容は、「同じ条件文を散乱させないようにしましょう。」という考え方で、散乱させてしまうと起こりうるミスとしては「条件文が書かれている場所が全て把握できず、新規で機能実装をする時などに条件文に条件を追加し忘れてしまう。」などが挙げられます。

こういったミスが起こりうるコードはできるだけ避け、共通の処理は１箇所にまとめることで仕様変更が楽で運用しやすいコードになります。

 [条件分岐の追加を忘れているコードの箇所](https://github.com/kdr250/good-code-bad-code-sample/blob/b11ac468e9cdc54a8f976376ca5a009ed329db90/app/src/main/java/com/example/sample/UI.java#L735)
 
# おわりに
今回は
- 6.2.5 条件分岐を１箇所にまとめる

をピックアップして実際に悪いコードが発生させる悪夢を紹介していきました。
こういった作りになってしまっているコードは世の中に溢れてしまっていると思います。
あるべき構造を理解して実装やリファクタしていくことで、悪魔のいない世界になることを願っています。
